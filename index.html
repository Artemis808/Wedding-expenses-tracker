<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Wedding Expense Tracker</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="container">
  <h1>Wedding Expense Tracker</h1>

  <div class="countdown-container">
    <div class="countdown-card">
      <h3>Engagement üíç</h3>
      <p id="engagementCountdown">Calculating...</p>
    </div>
    <div class="countdown-card">
      <h3>Wedding üéâ</h3>
      <p id="weddingCountdown">Calculating...</p>
    </div>
  </div>

  <div class="budget-edit">
    <input type="text" inputmode="numeric" id="totalBudgetInput" placeholder="Enter Total Budget (e.g. 12,00,000)">
    <button id="setBudgetBtn" class="primary-btn">Set Total Budget</button>
  </div>

  <div class="dashboard">
    <div class="card">
      <h3>Total Spent</h3>
      <p id="totalSpent">‚Çπ0</p>
    </div>
    <div class="card">
      <h3>Remaining</h3>
      <p id="remaining">‚Çπ0</p>
    </div>
    <div class="card">
      <h3>Settlement</h3>
      <p id="settlement">‚Çπ0</p>
    </div>
  </div>

  <h2>Manage Category Limits</h2>
  <div class="card" style="text-align: left; margin-bottom: 25px;">
    <div id="categorySettingsHeader" style="margin-bottom: 15px; font-weight: bold; color: #555;"></div>
    
    <div id="categorySettingsInputs"></div>
    
    <button id="saveLimitsBtn" class="primary-btn" style="margin-top: 15px;">
      Save & Verify Limits
    </button>
  </div>

  <h2>Category Budgets</h2>
  <div id="categoryBudgetList"></div>

  <h2>Add Expense</h2>
  <form id="expenseForm">
    <div class="form-row">
      <input type="date" id="date" required>
      <input type="text" id="title" placeholder="Expense Title" required>
    </div>
    <select id="category" required>
      <option value="">Select Category</option>
    </select>
    <div class="form-row">
      <select id="paidBy">
        <option value="Groom">Paid By: Groom</option>
        <option value="Bride">Paid By: Bride</option>
      </select>
      <select id="paymentMode">
        <option value="UPI">UPI</option>
        <option value="Bank Transfer">Bank Transfer</option>
        <option value="Card">Card</option>
        <option value="Cash">Cash</option>
      </select>
    </div>
    <input type="number" id="amount" placeholder="Amount (‚Çπ)" required>
    <input type="text" id="invoiceLink" placeholder="Invoice Link (Optional)">
    <textarea id="notes" placeholder="Notes (Optional)" rows="2"></textarea>
    <button type="submit" class="primary-btn">Save Expense</button>
  </form>

  <h2>Expenses</h2>
  <div id="expenseList"></div>

  <div class="actions">
    <button onclick="exportCSV()" class="secondary-btn">Export CSV</button>
    <button onclick="backupData()" class="secondary-btn">Download Backup</button>
    <input type="file" id="restoreInput" onchange="restoreData(event)" style="display:none">
    <button onclick="document.getElementById('restoreInput').click()" class="secondary-btn">Restore Backup</button>
  </div>
</div>

<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>

<script>
  // Placeholder Config
  const firebaseConfig = {
    apiKey: "TEMP", authDomain: "TEMP", databaseURL: "TEMP",
    projectId: "TEMP", storageBucket: "TEMP", messagingSenderId: "TEMP", appId: "TEMP"
  };
  if(firebase.apps.length === 0) firebase.initializeApp(firebaseConfig);
  const db = firebase.database();
</script>

<script src="app.js"></script>
</body>
</html>
